# This is Git's per-user configuration file.
[user]
	name = Ari Sweedler
	email = ari@sweedler.com
	username = ari.sweedler

[core]
	excludesfile = ~/.config/git/ignore
	editor = nvim

[init]
	templatedir = ~/.config/git/template
	defaultBranch = main

[pull]
	ff = only

[fetch]
	writeCommitGraph = true

[stash]
	showPatch = true

[alias]
	# Easily edit this file
	cconfig = config --edit --global

	# View these aliases more easily
	alias = "!git config --list | grep ^alias | cut -c 7- | sort #"
	showme = "!printf \"The alias '$1' is: \"; git config --list | sed /alias.$1=/!d | sed s/[^=]*=// #"

	# shorten
	a = "!git add .; git status"
	d = diff --staged --diff-algorithm=minimal
	els = editdiffls
	f = fetch --append --prune --jobs=4
	ff = pull --ff-only
	rr = rebase-remote
	fpr = finish-pr
	po = push-origin
	sw = "!git yankbranch; git switch -"

	# New commands
	diffls = diff --name-only
	editdiffls = "!f() { refspec="${1:-@}"; files=$(git diff --name-only ${refspec}); [ -n \"${files}\" ] && $EDITOR -p ${files} || echo \"no changes since ref='${refspec}'\" ;}; f"
	ignore = "!f() { echo $1 >> .gitignore; }; f"
	initt = "!git init; git commit --allow-empty --message 'first commit'"
	ls = ls-tree --full-tree -r --abbrev HEAD
	push-origin = "!git push --set-upstream origin $(git rev-parse --abbrev-ref HEAD)"
	rebase-remote = "!f() { b="${1:?provide a branch}"; o="${2:-origin}" ; git fetch "${o}" && git rebase -i "${o}/${b}" && git branch -f "${b}" "${o}/${b}"; }; f"
	worka = worktreex-add


[include]
	path = ~/.config/git/plugin/color.gitconfig
	path = ~/.config/git/plugin/delta.gitconfig
	path = ~/.config/git/plugin/dotfiles.gitconfig
	path = ~/.config/git/plugin/grep.gitconfig
	path = ~/.config/git/plugin/jujutsu-inspired.gitconfig
	path = ~/.config/git/plugin/log.gitconfig
	path = ~/.config/git/plugin/clipboard-utils.gitconfig
	path = ~/.config/git/plugin/mergetool.gitconfig
	path = ~/.config/git/plugin/rebase.gitconfig
	path = ~/.config/git/plugin/rerere.gitconfig
	path = ~/.config/git/plugin/submodules.gitconfig

[includeIf "gitdir:~/"]
	# Include computer-specific git configuration. Put this last so we can
	# override all of the above
	path = ~/.local/share/git/config
